{"version":3,"file":"vue.js","sources":["../../src/util/index.js","../../src/observer/index.js","../../src/state.js","../../src/init.js","../../src/index.js"],"sourcesContent":["export function isObject(data) {\n    return typeof data === 'object' && typeof data !== null\n}","// 把data中的数据都使用Object.defineProperty重新定义es5\n\n// Object.defineProperty 不能兼容ie8及以下vue2无法兼容ie8版本\nimport {isObject} from '../util/index'\n\nclass Observe{\n    constructor(data){\n        this.walk(data)\n    }\n    walk(data) {\n        Object.keys(data).forEach(item=>{\n            defineReactive(data,item,data[item])\n        })\n    }\n}\n\nfunction defineReactive(data,key,value) {\n    observe(value) // 递归实现深度检测\n    Object.defineProperty(data,key,{\n        get(){\n            // console.log('获取值')\n            return value\n        },\n        set(newval) {\n            if (newval ===value) return \n            console.log('设置值')\n            observe(newval) // 继续劫持用户设置的值 因为用户可能设置的值是一个对象\n            value = newval\n        }\n    })\n}\n\nexport function observe(data){\n    // console.log(data,'observe')\n    let isObj = isObject(data)\n    if (!isObj) return\n    return new Observe(data)\n}","import {observe} from './observer/index'\nexport function initState(vm){\n    const opts = vm.$options\n    console.log(opts)\n    // vue的数据来源 属性 方法 数据 计算属性 watch\n    if(opts.props) {\n        initProps(vm)\n    }\n    if(opts.methods) {\n        initMethods(vm)\n    }\n    if(opts.data) {\n        initData(vm)\n    }\n    if(opts.computed) {\n        initComputed(vm)\n    }\n    if(opts.watch) {\n        initWatch(vm)\n    }\n}\n\nfunction initProps(vm){\n\n}\n\nfunction initMethods(vm){\n\n}\nfunction initData(vm){\n    console.log('初始化数据')\n    let data = vm.$options.data\n    data = vm._data = typeof data === 'function' ? data.call(vm) : data\n    console.log(data)\n    // 对象劫持 用户改变了数据 MVVM模式数据改变可以额驱动试图改变\n    // Object.defineProperty()\n    observe(data)\n}\nfunction initComputed(vm){\n\n}\nfunction initWatch(vm){\n\n}","import {initState} from './state'\n\n// 在原型上添加init方法Vue实例通过调用时传入\nexport function initMixin(Vue) {\n    // 初始化流程\n    Vue.prototype._init = function(options) {\n        console.log(options)\n        const vm = this\n        // vue中使用this.$options就是用户传递的属性\n        vm.$options = options\n        initState(vm)\n    }\n}","import {initMixin} from './init'\nfunction Vue(options){\n    // console.log('hello world')\n    // console.log(options)\n    this._init(options)\n}\ninitMixin(Vue)\nexport default Vue"],"names":["isObject","data","Observe","constructor","walk","Object","keys","forEach","item","defineReactive","key","value","observe","defineProperty","get","set","newval","console","log","isObj","initState","vm","opts","$options","props","methods","initData","computed","watch","_data","call","initMixin","Vue","prototype","_init","options"],"mappings":"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"}